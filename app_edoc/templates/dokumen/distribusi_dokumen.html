{% extends 'layout.html' %}

{% block title %}Dokumen Menu{% endblock %}

{% block content %}
<style>
  .btn-link {
    border: none;
    outline: none;
    background: none;
    cursor: pointer;
    color: #0000EE;
    padding: 0;
    text-decoration: underline;
    font-family: inherit;
    font-size: inherit;
}
</style>
<div class="container">
    <div class="" style="margin: 0px 30px 0px 30px;">
        <div class="table-responsive">
          <div class="table-wrapper">
            <div class="table-title">
              <div class="row">
                <div class="col-sm-6">
                  <h5> <b>Distribusi Dokumen</b></h5>
                </div>
                <div class="col-sm-6">
                    <a class="btn btn-success" data-toggle="dropdown" href="#" role="button" aria-haspopup="true" aria-expanded="false"><i class="material-icons">&#xE147;</i> <span>Create</span></a>
                    <div class="dropdown-menu">
                        <a href="#addModalFile" class="btn btn-success" data-toggle="modal"><i class="material-icons">&#xE147;</i> <span>Create New File</span></a>
                        <a href="#addModalFolder" class="btn btn-success" data-toggle="modal"><i class="material-icons">&#xE147;</i> <span>Create New Folder</span></a>
                    </div>
                </div>
              </div>
            </div>
          </div>
        </div>
    </div>
    <div name="filebrowser">
      <h5><a href="{{ url_for('dokumen.menu_dokumen') }}">Kembali</a></h5>
      <h5>{{ current_working_directory }}</h5><br>
      <table>
        <tr>
          <th>name</th>
          <th>revision</th>
          <th>size</th>
          <th>type</th>
          <th>action</th>
        </tr>
        {% if root == False %}
        <tr>
          <td><a href="{{ url_for('dokumen.level_up') }}">..</a></td>
          <td></td>
        </tr>
        {% endif %}

        {% for item in file_list|sort(attribute='type', reverse=True) %}
        <tr>
          {% if '.' not in item[0] %}
          <td><strong><a href="{{ url_for('dokumen.level_down', item=item[0])}}">{{item[0]}}</a></strong></td>
          <td></td>
          <td></td>
          <td>{{item[3]}}</td>
          <td align="center"><a href="{{ url_for('dokumen.delete_folder', item=item[0])}}">&emsp;&emsp; X</a></td>
          {% else %}
          <td><a href="{{ url_for('dokumen.open_file', item=item[0])}}">{{item[0]}}</a></td>
          <td>{{item[1]}}</td>
          <td>{{item[2]}}</td>
          <td>{{item[3]}}</td>
          <td><a href="{{ url_for('dokumen.delete_file', item=item[0])}}">&emsp;&emsp; X</a></td>
        </tr>
        {% endif %}
        {% endfor %}
      </table>
      <!-- <ul>
        {% if root == False %}
        <li><a href="{{ url_for('dokumen.level_up') }}">..</a></li>
        {% endif %}
        {% for item in file_list %}
        {% if '.' not in item %}
        <li><strong><a href="{{ url_for('dokumen.level_down', item=item)}}">{{item}}</a></strong><a> X</a></li>
        {% else %}
        <li><a href="{{ url_for('dokumen.open_file', item=item)}}">{{item}}</a></li>
        {% endif %}
        {% endfor %}
      </ul> -->
    </div>
</div>

 <!-- Add Folder Modal HTML -->
 <div id="addModalFolder" class="modal fade">
    <div class="modal-dialog" style="max-width: 500px;">
      <div class="modal-content">
        <form method="POST" action="{{url_for('dokumen.create_folder')}}" name="elongasi">
          <div class="modal-header">						
            <h4 class="modal-title">Create Folder</h4>
            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
          </div>
          <div class="modal-body">
            <div class="form-group">
              <div class="row">
                <div class="col-12">
                  <div class="form-group">
                    <label>Nama Folder</label>
                    <input type="text" name="namafolder" class="form-control" required>
                  </div>
                </div>
                <div class="col-12">
                    <div class="form-group">
                      <label>Permission</label>
                      <input type="text" name="permission" class="form-control" placeholder="kosongkan untuk all user">
                    </div>
                  </div>
                      <input type="hidden" name="cwd" value="{{current_working_directory}}">
              </div>
            </div>
          </div>
          <div class="modal-footer">
            <input type="button" class="btn btn-default" data-dismiss="modal" value="Cancel">
            <input type="submit" class="btn btn-info" value="Save">
          </div>
        </form>
      </div>
    </div>
  </div>

   <!-- Add Folder Modal HTML -->
 <div id="addModalFile" class="modal fade">
    <div class="modal-dialog" style="max-width: 500px;">
      <div class="modal-content">
        <form method="POST" action="{{url_for('dokumen.create_file')}}" enctype="multipart/form-data">
          <div class="modal-header">						
            <h4 class="modal-title">Create File</h4>
            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
          </div>
          <div class="modal-body">
            <div class="form-group">
              <div class="row">
                <div class="col-12">
                    <div class="form-group">
                      <label>Upload File</label>
                      <input type="file" name="file" class="form-control" required>
                    </div>
                  </div>
                <div class="col-12">
                  <div class="form-group">
                    <label>Revision</label>
                    <input type="text" name="revision" class="form-control" required>
                  </div>
                </div>
                <div class="col-12">
                    <div class="form-group">
                      <label>Permission</label>
                      <input type="text" name="permission" class="form-control" placeholder="kosongkan untuk all user">
                    </div>
                  </div>
                  <input type="hidden" name="cwd" value="{{current_working_directory}}">
              </div>
            </div>
          </div>
          <div class="modal-footer">
            <input type="button" class="btn btn-default" data-dismiss="modal" value="Cancel">
            <input type="submit" class="btn btn-info" value="Save">
          </div>
        </form>
      </div>
    </div>
  </div>
{% endblock %}